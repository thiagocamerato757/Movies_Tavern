<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Movies Tavern</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='perfil.css') }}">
</head>
<body>
    <header>
        <div class="container">
            <a href="/"><button id="logo" class="botao_logo">Movies Tavern</button></a>
            <div class="nav-search-container">
                <nav>
                    <ul>
                        {% if 'user_id' in session %}
                            <li><a href="message" class="Mensagem">message</a></li>
                            {% if classe == 'Peasant' %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='peasant.jpg') }}" class="icone-perfil"></a></li>
                            {% elif classe == 'Warrior' %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='warrior.jpg') }}" class="icone-perfil"></a></li>
                            {% elif classe == 'Wizard' %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='wizard.jpg') }}" class="icone-perfil"></a></li>
                            {% elif classe == 'Rogue' %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='rogue.jpg') }}" class="icone-perfil"></a></li>
                            {% elif classe == 'Cleric' %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='cleric.jpg') }}" class="icone-perfil"></a></li>
                            {% elif classe == 'Barbarian' %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='barbarian.jpg') }}" class="icone-perfil"></a></li>
                            {% elif classe == 'Druid' %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='druid.jpg') }}" class="icone-perfil"></a></li>
                            {% elif classe == 'Bard' %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='bard.jpg') }}" class="icone-perfil"></a></li>
                            {% else %}
                                <li><a href="/perfil"><img src="{{ url_for('static', filename='paladin.jpg') }}" class="icone-perfil"></a></li>
                            {% endif %}
                            <li><a href="/" class="home">Home</a></li>
                        {% else %}
                            <li><a href="/login">Sign in</a></li>
                            <li><a href="/form">Create account</a></li>
                            <li><a href="/">Home</a></li>
                        {% endif %}
                    </ul>
                </nav>
                <form class="barra-pesquisa" action="/search" method="GET">
                    <input type="text" name="query" placeholder="Search..." required>
                    <button type="submit" class="botao-pesquisa">
                        <img src="{{ url_for('static', filename='pesquisa-de-lupa.png') }}" alt="Lupa" class="icone-lupa">
                    </button>
                </form>
            </div>
        </div>
    </header>
    <div class='perfil'>
        <div class="foto-perfil">
            {% if classe == 'Peasant' %}
                <img src="{{ url_for('static', filename='peasant.jpg') }}" class="icone-perfil-grande">
            {% elif classe == 'Warrior' %}
                <img src="{{ url_for('static', filename='warrior.jpg') }}" class="icone-perfil-grande">
            {% elif classe == 'Wizard' %}
                <img src="{{ url_for('static', filename='wizard.jpg') }}" class="icone-perfil-grande">
            {% elif classe == 'Rogue' %}
                <img src="{{ url_for('static', filename='rogue.jpg') }}" class="icone-perfil-grande">
            {% elif classe == 'Cleric' %}
                <img src="{{ url_for('static', filename='cleric.jpg') }}" class="icone-perfil-grande">
            {% elif classe == 'Barbarian' %}
                <img src="{{ url_for('static', filename='barbarian.jpg') }}" class="icone-perfil-grande">
            {% elif classe == 'Druid' %}
                <img src="{{ url_for('static', filename='druid.jpg') }}" class="icone-perfil-grande">
            {% elif classe == 'Bard' %}
                <img src="{{ url_for('static', filename='bard.jpg') }}" class="icone-perfil-grande">
            {% else %}
                <img src="{{ url_for('static', filename='paladin.jpg') }}" class="icone-perfil-grande">
            {% endif %}
        </div>
        <div class="descricao-perfil">
            <nav>
                <ul class="nome-perfil">{{ usuario }}</ul>
                <br>
                <ul class="classe-perfil">Class: {{ classe }}</ul>
                <br>
                <a href="{{ url_for('logout') }}"><button class="botao-logout">Sign out</button></a>
            </nav>
        </div>
    </div>
    <div class="filme-section">
        <div class="titulo-section">
            <h2 class="titulo-lista">Favorite movies</h2>
            <div class="button-container">
                <a id="show-more" onclick="showMoreFavorite()">Show all</a>
                <a id="show-less" onclick="showLessFavorite()">Show less</a>
            </div>
        </div>
        <div class="filme-container">
        {% for movie in favorito %}
            <div class="favorito-item">
                <div class="retangulo">
                    {% if movie.poster_path %}
                        <form action="{{ url_for('movie_detail', movie_id=movie.id) }}">
                            <button type="submit" class="image_botao">
                                <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }} poster" class="retangulo">
                            </button>
                        </form>
                    {% else %}
                        <form action="{{ url_for('movie_detail', movie_id=movie.id) }}">
                            <button type="submit" class="image_botao">
                                <img class="retangulo" src="static/noimage_door.png" alt="{{ movie.title }} poster">
                            </button>
                        </form>
                    {% endif %}
                </div>
                <h3><a class="filme-titulo" href="{{ url_for('movie_detail', movie_id=movie.id) }}">{{ movie.title }}</a></h3>
            </div>
        {% endfor %}
        </div>
    </div>
    <div class="filme-section">
        <div class="titulo-section">
            <h2 class="titulo-lista">Recent reviews</h2>
            <div class="button-container">
                <a id="show-more-reviews" onclick="showMoreReviews()">Show all</a>
                <a id="show-less-reviews" onclick="showLessReviews()">Show less</a>
            </div>
        </div>
        <div class="filme-container">
            {% for movie in recent_reviews %}
            <div class="review-item">
                <div class="retangulo">
                    {% if movie.poster_path %}
                        <form action="{{ url_for('movie_detail', movie_id=movie.id) }}">
                            <button type="submit" class="image_botao">
                                <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }} poster" class="retangulo">
                            </button>
                        </form>
                    {% else %}
                        <form action="{{ url_for('movie_detail', movie_id=movie.id) }}">
                            <button type="submit" class="image_botao">
                                <img class="retangulo" src="static/noimage_door.png" alt="{{ movie.title }} poster">
                            </button>
                        </form>
                    {% endif %}
                </div>
                <h3><a class="filme-titulo" href="{{ url_for('movie_detail', movie_id=movie.id) }}">{{ movie.title }}</a></h3>
            </div>
        {% endfor %}
        </div>
    </div>
    <script src="{{ url_for('static', filename='rating.js') }}"></script>
</body>
</html>
